(this.webpackJsonpSpatialArdhi=this.webpackJsonpSpatialArdhi||[]).push([[0],{131:function(e,t,a){e.exports=a(217)},136:function(e,t,a){},190:function(e,t){},214:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(44),c=a.n(l),s=(a(136),a(232)),o=a(233),i=a(234),m=a(35),u=a(36),p=a(38),d=a(37),E=a(223),h=a(237),g=a(224),f=a(225),v=a(27),b=a(219),y=a(220),w=a(221),O=a(222),j=a(28),S=a.n(j),N=localStorage.getItem("access"),C=S.a.create({baseURL:"https://www.spatialardhi.com/estate/",headers:{Authorization:"Bearer ".concat(N," ")},"Content-Type":"application/json"}),k=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={title:"",image:"",video:""},e.onChange=function(t){e.setState(Object(v.a)({},t.target.name,t.target.value))},e.createProperty=function(t){t.preventDefault();var a=new FormData(document.forms.namedItem("realEstate"));a.append("user_profile",e.props.user.id),C.post("data/?format=json",a,{params:{id:e.props.user.id}}).then((function(){e.props.toggle()}))},e.editProperty=function(t){t.preventDefault();var a=new FormData(document.forms.namedItem("realEstate"));C.put("data/"+e.props.result.id+"/",a).then((function(){e.props.toggle()}))},e.defaultIfEmpty=function(e){return""===e?"":e},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){if(this.props.property){var e=this.props.result,t=e.id,a=e.title,n=e.image,r=e.video;this.setState({id:t,title:a,image:n,video:r})}}},{key:"render",value:function(){return r.a.createElement(b.a,{name:"realEstate",onSubmit:this.props.result?this.editProperty:this.createProperty,encType:"multipart/form-data"},r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"title"},"Title:"),r.a.createElement(O.a,{type:"text",name:"title",onChange:this.onChange,value:this.defaultIfEmpty(this.state.title)})),r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"image"},"Image:"),r.a.createElement(O.a,{type:"file",name:"image",onChange:this.onChange})),r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"phone"},"Video:"),r.a.createElement(O.a,{type:"file",name:"video",onChange:this.onChange})),r.a.createElement(E.a,{color:"danger"},"UPLOAD"))}}]),a}(r.a.Component),x=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={modal:!1},e.toggle=function(){e.setState((function(e){return{modal:!e.modal}}))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.create,t="Editing Real Estate",a=r.a.createElement(E.a,{onClick:this.toggle},"Edit");return e&&(t="Add a new Real Estate",a=r.a.createElement(E.a,{color:"danger",className:"float-right",onClick:this.toggle},"UPLOAD")),r.a.createElement(n.Fragment,null,a,r.a.createElement(h.a,{isOpen:this.state.modal,toggle:this.toggle},r.a.createElement(g.a,{toggle:this.toggle},t),r.a.createElement(f.a,null,r.a.createElement(k,{toggle:this.toggle,user:this.props.user,create:e,result:this.props.result}))))}}]),a}(n.Component),I=a(23),T=Object(n.createContext)(),R=function(e){var t=Object(n.useContext)(T),a=t.logout,l=t.user;return r.a.createElement("header",{className:"header-section"},r.a.createElement(I.b,{to:"/",className:"site-logo"},r.a.createElement("img",{src:"/logo1.png",alt:""})),r.a.createElement("nav",{className:"header-nav"},r.a.createElement("ul",{className:"main-menu"},r.a.createElement("li",null,r.a.createElement(I.b,{to:"/home",className:"home"===e.active?"active":""},"Home")),r.a.createElement("li",null," ",r.a.createElement(I.b,{to:"/users",className:"users"===e.active?"active":""},"Users")),r.a.createElement("li",null," ",r.a.createElement(I.b,{to:"/virtual",className:"virtualtour"===e.active?"active":""},"Virtual Tour")),r.a.createElement("li",null,r.a.createElement("div",{className:"user-panel"},r.a.createElement(I.b,{to:"/profile",className:"register"},l?l.name:null))),r.a.createElement("li",{onClick:function(e){e.preventDefault(),a()}},r.a.createElement(I.b,{to:"#"},"Log Out")),r.a.createElement("li",null,r.a.createElement(x,{create:!0,user:l})))))},D=a(22),U=a(19),_=a.n(U),L=a(24),A=Object(n.createContext)(),B=function(e){var t=Object(n.useContext)(T),a=t.user,l=t.autenticated,c=Object(n.useState)([]),s=Object(D.a)(c,2),o=s[0],i=s[1],m=Object(n.useState)({title:""}),u=Object(D.a)(m,2),p=u[0],d=u[1],E=Object(n.useState)(!1),h=Object(D.a)(E,2),g=h[0],f=h[1],v=p.title;Object(n.useEffect)((function(){l&&a&&function(){var e=Object(L.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get("data/?format=json",{params:{id:a.id}});case 2:t=e.sent,i(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();g&&function(){var e=Object(L.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(" "===v||void 0===v){e.next=5;break}return e.next=3,C.get("data/?format=json",{params:{search:v}});case 3:t=e.sent,f(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[p,a]);var b=function(){var e=Object(L.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.delete("data/"+t+"/?format=json").then((function(){i(o.filter((function(e){return e.id!==t})))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(A.Provider,{value:{data:o,searchData:d,saveData:i,saveSearch:f,deleteProperty:b}},e.children)},P=Object(n.createContext)(),G=function(e){var t=Object(n.useContext)(T),a=t.user,l=t.autenticated,c=Object(n.useState)([]),s=Object(D.a)(c,2),o=s[0],i=s[1],m=Object(n.useState)({title:""}),u=Object(D.a)(m,2),p=u[0],d=u[1],E=Object(n.useState)(!1),h=Object(D.a)(E,2),g=h[0],f=h[1],v=p.title;return Object(n.useEffect)((function(){l&&a&&function(){var e=Object(L.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get("profiles/?format=json");case 2:t=e.sent,i(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();g&&function(){var e=Object(L.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(" "===v||void 0===v){e.next=5;break}return e.next=3,C.get("profiles/?format=json",{params:{search:v}});case 3:t=e.sent,i(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[p,a]),r.a.createElement(P.Provider,{value:{users:o,searchU:p,searchUsers:d,saveUsers:i,saveSearch:f}},e.children)},z=a(236),F=a(121),M=a(226),Y=function(e){var t=Object(n.useState)(!1),a=Object(D.a)(t,2),l=a[0],c=a[1],s=Object(n.useContext)(A).deleteProperty,o=function(){c(!l)};return r.a.createElement(n.Fragment,null,r.a.createElement(E.a,{color:"danger",onClick:function(){return o()}},"Remove"),r.a.createElement(h.a,{isOpen:l,toggle:o},r.a.createElement(g.a,{toggle:o},"Do you really wanna delete this?"),r.a.createElement(M.a,null,r.a.createElement(E.a,{type:"button",onClick:function(){return o()}},"Cancel"),r.a.createElement(E.a,{type:"button",color:"danger",onClick:function(){return t=e.result.id,s(t),void o();var t}},"Yes"))))},W=a(129),H=function(e){var t=e.image;e.video;return r.a.createElement("div",null,r.a.createElement(W.a,{width:"100%",height:"500px",image:t,pitch:10,yaw:180,hfov:110,autoLoad:!0,onLoad:function(){console.log("panorama loaded")}}))},J=a(227),V=a(228),K=a(229),q=a(230),$=function(e){var t=e.result,a=e.active,l=Object(n.useContext)(T).user;return"realEstate"===a?r.a.createElement(J.a,{mt:"10"},r.a.createElement(V.a,{top:!0,src:t.image,alt:"real estate image"}),r.a.createElement(K.a,null,r.a.createElement(q.a,null,r.a.createElement("h5",null,t.title)),r.a.createElement(F.Player,{playsInline:!0,src:t.video}),r.a.createElement(H,{image:"https://cors-anywhere.herokuapp.com/".concat(t.image),video:t.video})),l&&t.user_profile===l.id?r.a.createElement("div",null,r.a.createElement(x,{create:!1,result:t,user:l}),"\xa0\xa0\xa0\xa0",r.a.createElement(Y,{result:t})):null):r.a.createElement(J.a,null,r.a.createElement("div",{className:"property-item"},r.a.createElement("div",{className:"pi-image"},r.a.createElement("img",{src:t.avatar,alt:"Avatar"})),r.a.createElement("h5",null,t.name),r.a.createElement("p",null," ",t.bio," ")))},Q=a(231),X=a(47),Z=function(e){var t,a=e.results,l=e.active;t="realEstate"===l?3:9;var c=a.length,s=Object(n.useState)(!0),o=Object(D.a)(s,2),i=o[0],m=o[1],u=Object(n.useState)(Object(X.slice)(a,0,t)),p=Object(D.a)(u,2),d=p[0],E=p[1],h=Object(n.useState)(t),g=Object(D.a)(h,2),f=g[0],v=g[1];Object(n.useEffect)((function(){a.length>0&&E(Object(X.slice)(a,0,t))}),[a,t]);return r.a.createElement("section",{className:"property-section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"section-title"},r.a.createElement("h2",null,"RESULTS ")),0===a.length?r.a.createElement("li",{className:"col-lg-4"},r.a.createElement("h3",null,"No results")):r.a.createElement(z.a,null,r.a.createElement(Q.a,null,d.map((function(e){return r.a.createElement($,{key:e.id,result:e,active:l})}))),i&&r.a.createElement("button",{onClick:function(){var e=f+t,n=e<c-1,r=Object(X.concat)(d,Object(X.slice)(a,f,e));v(e),E(r),m(n)},className:"site-btn btn-danger"}," Load More "))))},ee=function(e){var t=Object(n.useState)(""),a=Object(D.a)(t,2),l=a[0],c=a[1],s=Object(n.useContext)(A),o=s.data,i=s.searchData,m=Object(n.useContext)(P),u=m.users,p=m.searchUsers,d=m.saveSearch,E=function(e){e.preventDefault(),c(Object(v.a)({},e.target.name,e.target.value))};return r.a.createElement("div",null,r.a.createElement("section",{className:"hero-section set-bg"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"hero-warp"},r.a.createElement("form",{className:"main-search-form",onSubmit:function(t){t.preventDefault(),"users"===e.active?(p(l),d(!0)):(i(l),d(!0))},encType:"multipart/form-data"},r.a.createElement("div",{className:"search-type"},r.a.createElement("div",{className:"st-item"},r.a.createElement("input",{onChange:E,type:"radio",name:"st",id:"states",checked:"realEstate"===e.active||null}),r.a.createElement("label",{htmlFor:"states"},"REAL ESTATES")),r.a.createElement("div",{className:"st-item"},r.a.createElement("input",{onChange:E,type:"radio",name:"st",id:"states",checked:"users"===e.active||null}),r.a.createElement("label",{htmlFor:"states"},"USERS"))),r.a.createElement("div",{className:"search-input"},r.a.createElement("input",{type:"text",name:"title",placeholder:"users"===e.active?"Username":"Title",onChange:E,value:l}),r.a.createElement("button",{type:"submit",className:"site-btn btn-danger"},"Search")))))),r.a.createElement(Z,{results:"users"===e.active?u:o,active:e.active}))},te=function(){return r.a.createElement(s.a,null,r.a.createElement(R,{active:"home"}),r.a.createElement(o.a,null,r.a.createElement(i.a,null,r.a.createElement(ee,{active:"realEstate"}))))},ae=a(41),ne=a(29),re=a(235),le="https://www.spatialardhi.com/estate/password_reset/?format=api",ce="https://www.spatialardhi.com/estate/password_reset/validate_token/?format=api",se=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",organization:"",bio:"",password:"",user_type:"",errorSignin:null,message:null},e.onChange=function(t){e.setState(Object(v.a)({},t.target.name,t.target.value))},e.createUser=function(t){t.preventDefault();var a=new FormData(document.forms.namedItem("user"));S.a.post("https://www.spatialardhi.com/estate/profiles/",a).then((function(){e.setState({errorSignin:null,message:"Great! Now you can login"}),e.props.toggle()})).catch((function(t){return e.setState({errorSignin:"Signin Error! "})}))},e.editUser=function(t){t.preventDefault(),C.put("profiles/"+e.props.user.id+"/",e.state).then((function(){e.props.toggle()})).catch((function(t){return e.setState({errorSignin:"Error! "})}))},e.defaultIfEmpty=function(e){return""===e?"":e},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){if(this.props.user){var e=this.props.user,t=e.id,a=e.name,n=e.email,r=e.bio,l=e.organization,c=e.password;this.setState({id:t,name:a,email:n,bio:r,organization:l,password:c})}}},{key:"render",value:function(){return r.a.createElement(b.a,{name:"user",id:"user",onSubmit:this.props.user?this.editUser:this.createUser,encType:"multipart/form-data"},r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"email"},"Email:"),r.a.createElement(O.a,{type:"email",name:"email",onChange:this.onChange,value:this.defaultIfEmpty(this.state.email),autoComplete:this.defaultIfEmpty(this.state.email)}),r.a.createElement(O.a,{type:"hidden",name:"user_type",value:this.defaultIfEmpty(this.state.user_type),autoComplete:this.defaultIfEmpty(this.state.user_type)})),r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"name"},"Name:"),r.a.createElement(O.a,{type:"text",name:"name",onChange:this.onChange,value:this.defaultIfEmpty(this.state.name),autoComplete:this.defaultIfEmpty(this.state.name)})),r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"organization"},"Organization:"),r.a.createElement(O.a,{type:"text",name:"organization",onChange:this.onChange,value:this.defaultIfEmpty(this.state.organization),autoComplete:this.defaultIfEmpty(this.state.organization)})),r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"bio"},"Bio:"),r.a.createElement(O.a,{type:"text",name:"bio",onChange:this.onChange,value:this.defaultIfEmpty(this.state.bio),autoComplete:this.defaultIfEmpty(this.state.organization)})),r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"avatar"},"Avatar"),r.a.createElement(O.a,{type:"file",name:"avatar",onChange:this.onChange})),r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"password"},"Password:"),r.a.createElement(O.a,{type:"password",name:"password",onChange:this.onChange,value:this.defaultIfEmpty(this.state.password),autoComplete:this.defaultIfEmpty(this.props.password)})),this.state.errorSignin?r.a.createElement(re.a,{color:"danger"}," ",this.state.errorSignin," "):null,this.state.message?r.a.createElement(re.a,{color:"success"}," ",this.state.message," "):null,this.props.create?r.a.createElement(E.a,{type:"submit",color:"danger"},"REGISTER"):r.a.createElement(E.a,{type:"submit",color:"danger"},"SAVE"))}}]),a}(r.a.Component),oe=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={modal:!1},e.toggle=function(){e.setState((function(e){return{modal:!e.modal}}))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.create,t="Editing User",a=r.a.createElement(E.a,{onClick:this.toggle},"Edit");return e&&(t="Register",a=r.a.createElement(E.a,{color:"danger",type:"button",className:"float-right",style:{marginTop:"-35px",display:"flex"},onClick:this.toggle},"JOIN US")),r.a.createElement(n.Fragment,null,a,r.a.createElement(h.a,{isOpen:this.state.modal,toggle:this.toggle},r.a.createElement(g.a,{toggle:this.toggle},t),r.a.createElement(f.a,null,r.a.createElement(se,{toggle:this.toggle,user:this.props.user,create:e}))))}}]),a}(n.Component),ie=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(D.a)(t,2),l=a[0],c=a[1],s=l.email,o=l.password,i=Object(n.useContext)(T),m=i.message,u=i.login,p=i.user,d=i.autenticated,h=i.autenticatedUser;Object(n.useEffect)((function(){h(),d&&p&&e.history.push("/home")}),[m,d,e.history,p]);var g=function(e){c(Object(ne.a)(Object(ne.a)({},l),{},Object(v.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"limiter"},r.a.createElement("div",{className:"container-login100"},r.a.createElement("div",{className:"wrap-login100"},r.a.createElement(b.a,{id:"login",onSubmit:function(e){e.preventDefault(),u({email:s,password:o})},encType:"multipart/form-data"},r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"email"},"Email:"),r.a.createElement(O.a,{type:"text",name:"email",onChange:g,value:s})),r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"password"},"Password:"),r.a.createElement(O.a,{type:"password",name:"password",onChange:g,value:o})),m?r.a.createElement(re.a,{color:"danger"}," ",m," "):null,r.a.createElement(E.a,{color:"danger",type:"submit"},"LOGIN")),r.a.createElement(oe,{create:!0,user:p}),r.a.createElement(I.b,{className:"text-danger",to:"/reset-password"}," Forgot your password? "))))},me=function(){var e=Object(n.useContext)(T).user;return r.a.createElement("div",null,r.a.createElement(R,{active:"profile"}),r.a.createElement(o.a,null,r.a.createElement("div",{className:"user-section"},r.a.createElement("div",{className:"user-warp"},r.a.createElement("div",{className:"user-image"},r.a.createElement("img",{src:e.avatar,alt:"avatar"})),r.a.createElement("h2",null,e.name),r.a.createElement("h4",null,r.a.createElement("strong",null,"Organization: "),e.organization," "),r.a.createElement("h4",null,r.a.createElement("strong",null,"Bio: "),e.bio," "),r.a.createElement("h4",null,r.a.createElement("strong",null,"Email: "),e.email," "),r.a.createElement("div",null,r.a.createElement(oe,{create:!1,user:e}))))))},ue=(a(214),function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"lost"},r.a.createElement("section",{className:"error-page-background"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"text-center"},r.a.createElement(I.b,{to:"","data-toggle":"modal","data-target":"#reason",title:"Why You Are Seeing 404 Page"},r.a.createElement("i",{className:"icon-question bounce"}))),r.a.createElement("h2",null,"404"),r.a.createElement("p",null,"The Page You Are Looking For Doesn't Exist."),r.a.createElement("div",{className:"text-center"},r.a.createElement(I.b,{to:"/home",className:"button button-style"},"Back To Home "))))))),r.a.createElement("div",{className:"modal fade reason-popup-box padding-top-120",id:"reason",role:"dialog"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"box-padding"},r.a.createElement("button",{type:"button",className:"btn pull-right","data-dismiss":"modal"},r.a.createElement("i",{className:"icon-close"})),r.a.createElement("h3",null,"Why You Are Seeing 404 Page ?"),r.a.createElement("div",{className:"margin-top-20"},r.a.createElement("ul",{className:"list-icon size-sm"},r.a.createElement("li",null,"May be, The page is removed."),r.a.createElement("li",null,"May be, The page name have changed."),r.a.createElement("li",null,"May be, You did typed wrong keyword."),r.a.createElement("li",null,"May be, The link is temporarily unavailable.")))))))))))}),pe=function(){var e=Object(n.useContext)(T).user,t=Object(n.useContext)(A).data,a=document.createElement("script");return a.src="/index.js",window.results=t,a.async=!0,document.body.appendChild(a),r.a.createElement("div",null,r.a.createElement(R,{user:e,active:"virtualtour"}),r.a.createElement("div",{id:"pano"}),r.a.createElement("div",{id:"sceneList"},r.a.createElement("ul",{className:"scenes"},t.map((function(e){return r.a.createElement("a",{href:"javascript:void(0)",className:"scene","data-id":e.id,key:e.id},r.a.createElement("li",{className:"text",key:e.id},e.title))})))),r.a.createElement("div",{id:"titleBar"},r.a.createElement("h1",{className:"sceneName"}," ")),r.a.createElement("a",{href:"javascript:void(0)",id:"autorotateToggle"},r.a.createElement("img",{className:"icon off",src:"img/play.png",alt:"play"}),r.a.createElement("img",{className:"icon on",src:"img/pause.png",alt:"pause"})),r.a.createElement("a",{href:"javascript:void(0)",id:"fullscreenToggle"},r.a.createElement("img",{className:"icon off",src:"img/fullscreen.png",alt:"fullscreen"}),r.a.createElement("img",{className:"icon on",src:"img/windowed.png",alt:"windowed"})),r.a.createElement("a",{href:"javascript:void(0)",id:"sceneListToggle"},r.a.createElement("img",{className:"icon off",src:"img/expand.png",alt:"expand"}),r.a.createElement("img",{className:"icon on",src:"img/collapse.png",alt:"collapse"})),r.a.createElement("a",{href:"javascript:void(0)",id:"viewUp",className:"viewControlButton viewControlButton-1"},r.a.createElement("img",{className:"icon",src:"img/up.png",alt:"up"})),r.a.createElement("a",{href:"javascript:void(0)",id:"viewDown",className:"viewControlButton viewControlButton-2"},r.a.createElement("img",{className:"icon",src:"img/down.png",alt:"down"})),r.a.createElement("a",{href:"javascript:void(0)",id:"viewLeft",className:"viewControlButton viewControlButton-3"},r.a.createElement("img",{className:"icon",src:"img/left.png",alt:"left"})),r.a.createElement("a",{href:"javascript:void(0)",id:"viewRight",className:"viewControlButton viewControlButton-4"},r.a.createElement("img",{className:"icon",src:"img/right.png",alt:"right"})),r.a.createElement("a",{href:"javascript:void(0)",id:"viewIn",className:"viewControlButton viewControlButton-5"},r.a.createElement("img",{className:"icon",src:"img/plus.png",alt:"plus"})),r.a.createElement("a",{href:"javascript:void(0)",id:"viewOut",className:"viewControlButton viewControlButton-6"},r.a.createElement("img",{className:"icon",src:"img/minus.png",alt:"minus"})))},de=function(){return r.a.createElement(s.a,null,r.a.createElement(R,{active:"users"}),r.a.createElement(o.a,null,r.a.createElement(i.a,null,r.a.createElement(ee,{active:"users"}))))},Ee=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",token:"",sent:null,sentToken:null,error:null,errortoken:null,errorpassword:null},e.onChange=function(t){e.setState(Object(v.a)({},t.target.name,t.target.value))},e.defaultIfEmpty=function(e){return""===e?"":e},e.reset=function(t){t.preventDefault(),S.a.post(le,e.state).then((function(t){200===t.status&&e.setState({sent:"Check your email",error:null})})).catch((function(t){return e.setState({error:"There is no active user associated with this e-mail address or the password can not be changed"})}))},e.sendtoken=function(t){t.preventDefault(),S.a.post(ce,e.state).then((function(t){200===t.status&&e.setState({sent:"Check your email",errortoken:null})})).catch((function(t){return e.setState({errortoken:"Invalid token"})}))},e.sendpassword=function(t){t.preventDefault(),S.a.post("https://www.spatialardhi.com/estate/password_reset/confirm/",e.state).then((function(t){200===t.status&&e.setState({sent:"Succesfully changed your password",errorpassword:null})})).catch((function(t){return e.setState({errorpassword:"Invalid password",sent:null})}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem("refresh")&&this.props.history.push("/home")}},{key:"render",value:function(){return r.a.createElement("div",{className:"limiter"},r.a.createElement("div",{className:"container-login100"},r.a.createElement("div",{className:"wrap-login100"},r.a.createElement(b.a,{onSubmit:this.reset,encType:"multipart/form-data"},r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"email"},"Email:"),r.a.createElement(O.a,{type:"text",name:"email",onChange:this.onChange,value:this.defaultIfEmpty(this.state.email)})),this.state.error?r.a.createElement(re.a,{color:"danger"}," ",this.state.error," "):null,this.state.token?null:r.a.createElement(E.a,{color:"danger"},"Send me a verification code")),this.state.sent?r.a.createElement(b.a,{onSubmit:this.sendtoken,encType:"multipart/form-data"},r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"token"},"Check your email and insert the code here"),r.a.createElement(O.a,{type:"text",name:"token",onChange:this.onChange,value:this.defaultIfEmpty(this.state.token)})),this.state.errortoken?r.a.createElement(re.a,{color:"danger"}," ",this.state.errortoken," "):null,r.a.createElement(E.a,{color:"danger"},"Send")):null,this.state.sentToken?r.a.createElement(b.a,{onSubmit:this.sendpassword,encType:"multipart/form-data"},r.a.createElement(y.a,null,r.a.createElement(w.a,{for:"password"},"Check your email and insert the code here"),r.a.createElement(O.a,{type:"text",name:"password",onChange:this.onChange,value:this.defaultIfEmpty(this.state.password)}),r.a.createElement(O.a,{type:"hidden",name:"token",onChange:this.onChange,value:this.defaultIfEmpty(this.state.token)})),this.state.errorpassword?r.a.createElement(re.a,{color:"danger"}," ",this.state.errorpassword," "):null,r.a.createElement(E.a,{color:"danger"},"Send")):null,r.a.createElement("a",{className:"text-danger",href:"/"}," Home "))))}}]),a}(r.a.Component),he=a(130),ge=a(128),fe=function(){var e=Object(L.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={refresh:localStorage.getItem("refresh")},!localStorage.getItem("refresh")){e.next=6;break}return e.next=4,S.a.post("https://www.spatialardhi.com/api/token/refresh/",t).then((function(e){localStorage.removeItem("refresh"),localStorage.setItem("access",e.data.access)})).catch((function(e){return!1}));case 4:e.next=7;break;case 6:localStorage.clear();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(L.a)(_.a.mark((function e(t){var a,n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(ge.a)(t),n=a.exp,r=1e3*n-6e4,!(Date.now()>=r)){e.next=11;break}if(localStorage.removeItem("access"),!(t=fe())){e.next=9;break}return e.abrupt("return");case 9:return localStorage.clear(),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(e){var t=e.component,a=Object(he.a)(e,["component"]),l=Object(n.useContext)(T),c=(l.autenticated,l.autenticatedUser);l.logout;return Object(n.useEffect)((function(){c()}),[]),r.a.createElement(ae.b,Object.assign({},a,{render:function(e){return localStorage.getItem("access")&&ve(localStorage.getItem("access"))?r.a.createElement(t,e):r.a.createElement(ae.a,{to:"/"})}}))},ye=function(e,t){switch(t.type){case"REGISTERED":case"LOGIN_OK":return Object(ne.a)(Object(ne.a)({},e),{},{autenticated:!0,message:null});case"GET_USER":return Object(ne.a)(Object(ne.a)({},e),{},{user:t.payload});case"GETUSER_ERROR":return Object(ne.a)(Object(ne.a)({},e),{},{user:null});case"LOG_OUT":case"LOGIN_ERROR":case"REGISTER_ERROR":return localStorage.clear(),Object(ne.a)(Object(ne.a)({},e),{},{token:null,user:null,autenticated:null,message:t.payload});default:return e}},we=function(e){var t={token:localStorage.getItem("access"),autenticated:localStorage.getItem("access"),user:localStorage.getItem("user"),message:null},a=Object(n.useReducer)(ye,t),l=Object(D.a)(a,2),c=l[0],s=l[1],o=function(){var e=Object(L.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=localStorage.getItem("access"))&&ve(t),e.prev=2,!localStorage.getItem("email")){e.next=9;break}return e.next=6,C.get("profiles/?format=json&search=".concat(localStorage.getItem("email")));case 6:a=e.sent,localStorage.setItem("user",a.data[0]),s({type:"GET_USER",payload:a.data[0]});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),s({type:"GETUSER_ERROR"});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(L.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("https://www.spatialardhi.com/api/token/",t);case 3:a=e.sent,document.cookie="access = "+a.data.access,localStorage.setItem("refresh",a.data.refresh),localStorage.setItem("access",a.data.access),localStorage.setItem("email",t.email),s({type:"LOGIN_OK",payload:a.data}),o(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),s({type:"LOGIN_ERROR",payload:"Error! Try again"});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(T.Provider,{value:{token:c.token,autenticated:c.autenticated,user:c.user,message:c.message,login:i,autenticatedUser:o,logout:function(){s({type:"LOG_OUT"})}}},e.children)},Oe=function(){return r.a.createElement(we,null,r.a.createElement(B,null,r.a.createElement(G,null,r.a.createElement(I.a,null,r.a.createElement(ae.d,null,r.a.createElement(ae.b,{exact:!0,path:"/",component:ie}),r.a.createElement(be,{exact:!0,path:"/profile",component:me}),r.a.createElement(be,{exact:!0,path:"/home",component:te}),r.a.createElement(ae.b,{exact:!0,path:"/reset-password",component:Ee}),r.a.createElement(be,{exact:!0,path:"/virtual",component:pe}),r.a.createElement(be,{exact:!0,path:"/users",component:de}),r.a.createElement(ae.b,{component:ue}))))))};a(215),a(216),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[131,1,2]]]);
//# sourceMappingURL=main.0d3c35ff.chunk.js.map