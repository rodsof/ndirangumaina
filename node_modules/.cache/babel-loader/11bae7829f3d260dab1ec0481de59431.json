{"ast":null,"code":"import _regeneratorRuntime from\"/home/sofi/Documentos/SpatialArdhi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/sofi/Documentos/SpatialArdhi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/sofi/Documentos/SpatialArdhi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createContext,useState,useEffect,useContext}from'react';import AuthContext from'./auth/AuthContext';import clientAxios from'../config/axios';export var DataContext=createContext();var DataProvider=function DataProvider(props){var authContext=useContext(AuthContext);var user=authContext.user,autenticated=authContext.autenticated;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],saveData=_useState2[1];var _useState3=useState({title:''}),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],searchData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),searchMade=_useState6[0],saveSearch=_useState6[1];var title=search.title;useEffect(function(){if(autenticated&&user){var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return clientAxios.get('data/?format=json',{params:{id:user.id}});case 2:response=_context.sent;saveData(response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();getData();}if(searchMade){var getSearchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(title!==\" \"&&title!==undefined)){_context2.next=5;break;}_context2.next=3;return clientAxios.get('data/?format=json',{params:{search:title}});case 3:response=_context2.sent;saveSearch(response.data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getSearchData(){return _ref2.apply(this,arguments);};}();getSearchData();}},[search,user]);var deleteProperty=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return clientAxios.delete('data/'+id+'/?format=json').then(function(){saveData(data.filter(function(d){return d.id!==id;}));});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function deleteProperty(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(DataContext.Provider,{value:{data:data,searchData:searchData,saveData:saveData,saveSearch:saveSearch,deleteProperty:deleteProperty}},props.children);};export default DataProvider;","map":{"version":3,"sources":["/home/sofi/Documentos/SpatialArdhi/src/context/DataContext.js"],"names":["React","createContext","useState","useEffect","useContext","AuthContext","clientAxios","DataContext","DataProvider","props","authContext","user","autenticated","data","saveData","title","search","searchData","searchMade","saveSearch","getData","get","params","id","response","getSearchData","undefined","deleteProperty","delete","then","filter","d","children"],"mappings":"wcAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,CAA+BC,QAA/B,CAAyCC,SAAzC,CAAoDC,UAApD,KAAsE,OAAtE,CACA,MAAOC,CAAAA,WAAP,KAAwB,oBAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CAEA,MAAO,IAAMC,CAAAA,WAAW,CAAGN,aAAa,EAAjC,CAEP,GAAMO,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAE5B,GAAMC,CAAAA,WAAW,CAAGN,UAAU,CAACC,WAAD,CAA9B,CAF4B,GAGpBM,CAAAA,IAHoB,CAGGD,WAHH,CAGpBC,IAHoB,CAGdC,YAHc,CAGGF,WAHH,CAGdE,YAHc,eAKHV,QAAQ,CAAC,EAAD,CALL,wCAKrBW,IALqB,eAKfC,QALe,8BAMCZ,QAAQ,CAAC,CAClCa,KAAK,CAAE,EAD2B,CAAD,CANT,yCAMrBC,MANqB,eAMbC,UANa,8BASKf,QAAQ,CAAC,KAAD,CATb,yCASrBgB,UATqB,eASTC,UATS,kBAWpBJ,CAAAA,KAXoB,CAWVC,MAXU,CAWpBD,KAXoB,CAa5BZ,SAAS,CAAC,UAAM,CACZ,GAAIS,YAAY,EAAID,IAApB,CAA0B,CACtB,GAAMS,CAAAA,OAAO,0FAAG,sKACWd,CAAAA,WAAW,CAACe,GAAZ,CAAgB,mBAAhB,CAAqC,CAAEC,MAAM,CAAE,CAAEC,EAAE,CAAEZ,IAAI,CAACY,EAAX,CAAV,CAArC,CADX,QACNC,QADM,eAEZV,QAAQ,CAACU,QAAQ,CAACX,IAAV,CAAR,CAFY,sDAAH,kBAAPO,CAAAA,OAAO,0CAAb,CAIAA,OAAO,GACV,CAED,GAAIF,UAAJ,CAAgB,CAEZ,GAAMO,CAAAA,aAAa,2FAAG,0JACdV,KAAK,GAAK,GAAV,EAAiBA,KAAK,GAAKW,SADb,kDAESpB,CAAAA,WAAW,CAACe,GAAZ,CAAgB,mBAAhB,CAAqC,CAAEC,MAAM,CAAE,CAAEN,MAAM,CAAED,KAAV,CAAV,CAArC,CAFT,QAERS,QAFQ,gBAGdL,UAAU,CAACK,QAAQ,CAACX,IAAV,CAAV,CAHc,wDAAH,kBAAbY,CAAAA,aAAa,2CAAnB,CAOAA,aAAa,GAChB,CAEJ,CArBQ,CAqBN,CAACT,MAAD,CAASL,IAAT,CArBM,CAAT,CAuBD,GAAMgB,CAAAA,cAAc,2FAAG,kBAAOJ,EAAP,6IACZjB,CAAAA,WAAW,CAACsB,MAAZ,CAAmB,QAAUL,EAAV,CAAe,eAAlC,EAAmDM,IAAnD,CAAwD,UAAM,CAChEf,QAAQ,CAACD,IAAI,CAACiB,MAAL,CAAa,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACR,EAAF,GAASA,EAAb,EAAd,CAAD,CAAR,CACH,CAFK,CADY,yDAAH,kBAAdI,CAAAA,cAAc,6CAApB,CAMC,mBACI,oBAAC,WAAD,CAAa,QAAb,EACI,KAAK,CAAE,CACHd,IAAI,CAAJA,IADG,CAEHI,UAAU,CAAVA,UAFG,CAGHH,QAAQ,CAARA,QAHG,CAIHK,UAAU,CAAVA,UAJG,CAKHQ,cAAc,CAAdA,cALG,CADX,EASKlB,KAAK,CAACuB,QATX,CADJ,CAaH,CAvDD,CAyDA,cAAexB,CAAAA,YAAf","sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\nimport AuthContext from './auth/AuthContext';\nimport clientAxios from '../config/axios';\n\nexport const DataContext = createContext();\n\nconst DataProvider = (props) => {\n\n    const authContext = useContext(AuthContext);\n    const { user, autenticated } = authContext;\n\n    const [data, saveData] = useState([]);\n    const [search, searchData] = useState({\n        title: '',\n    });\n    const [searchMade, saveSearch] = useState(false);\n\n    const { title } = search;\n\n    useEffect(() => {\n        if (autenticated && user) {\n            const getData = async () => {\n                const response = await clientAxios.get('data/?format=json', { params: { id: user.id } });\n                saveData(response.data)\n            }\n            getData();\n        }\n\n        if (searchMade) {\n\n            const getSearchData = async () => {\n                if (title !== \" \" && title !== undefined) {\n                    const response = await clientAxios.get('data/?format=json', { params: { search: title } })\n                    saveSearch(response.data) \n                    }\n                 \n                }\n            getSearchData();\n        }\n\n    }, [search, user]);\n\n   const deleteProperty = async (id) => {\n        await clientAxios.delete('data/' + id + '/?format=json').then(() => {\n            saveData(data.filter( d => d.id !== id ))\n        });\n      };\n\n    return (\n        <DataContext.Provider\n            value={{\n                data,\n                searchData,\n                saveData,\n                saveSearch,\n                deleteProperty\n            }}\n        >\n            {props.children}\n        </DataContext.Provider>\n    );\n}\n\nexport default DataProvider;"]},"metadata":{},"sourceType":"module"}