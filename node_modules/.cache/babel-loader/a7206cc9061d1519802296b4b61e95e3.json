{"ast":null,"code":"import _defineProperty from\"/home/sofi/Documentos/SpatialArdhi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/sofi/Documentos/SpatialArdhi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/sofi/Documentos/SpatialArdhi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/sofi/Documentos/SpatialArdhi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/sofi/Documentos/SpatialArdhi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Button,Form,FormGroup,Input,Label,Alert}from\"reactstrap\";import axios from\"axios\";import{API_URL_RESETP,API_URL_SENDT}from\"../constants\";var ResetPassword=/*#__PURE__*/function(_React$Component){_inherits(ResetPassword,_React$Component);var _super=_createSuper(ResetPassword);function ResetPassword(){var _this;_classCallCheck(this,ResetPassword);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={email:\"\",password:\"\",token:\"\",sent:null,sentToken:null,error:null,errortoken:null,errorpassword:null};_this.onChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.defaultIfEmpty=function(value){return value===\"\"?\"\":value;};_this.reset=function(e){e.preventDefault();axios.post(API_URL_RESETP,_this.state).then(function(res){// console.log(res.status);\nif(res.status===200){_this.setState({sent:\"Check your email\",error:null});}}).catch(function(error){return _this.setState({error:\"There is no active user associated with this e-mail address or the password can not be changed\"});});};_this.sendtoken=function(e){e.preventDefault();axios.post(API_URL_SENDT,_this.state).then(function(res){// console.log(res.status);\nif(res.status===200){_this.setState({sent:\"Check your email\",errortoken:null});}}).catch(function(error){return _this.setState({errortoken:\"Invalid token\"});});};_this.sendpassword=function(e){e.preventDefault();axios.post(\"https://www.spatialardhi.com/estate/password_reset/confirm/\",_this.state).then(function(res){// console.log(res.status);\nif(res.status===200){_this.setState({sent:\"Succesfully changed your password\",errorpassword:null});}}).catch(function(error){return _this.setState({errorpassword:\"Invalid password\",sent:null});});};return _this;}_createClass(ResetPassword,[{key:\"componentDidMount\",value:function componentDidMount(){if(localStorage.getItem(\"refresh\")){this.props.history.push(\"/home\");}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"limiter\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container-login100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wrap-login100\"},/*#__PURE__*/React.createElement(Form,{onSubmit:this.reset,encType:\"multipart/form-data\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"email\"},\"Email:\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"email\",onChange:this.onChange,value:this.defaultIfEmpty(this.state.email)})),this.state.error?/*#__PURE__*/React.createElement(Alert,{color:\"danger\"},\" \",this.state.error,\" \"):null,!this.state.token?/*#__PURE__*/React.createElement(Button,{color:\"danger\"},\"Send me a verification code\"):null),this.state.sent?/*#__PURE__*/React.createElement(Form,{onSubmit:this.sendtoken,encType:\"multipart/form-data\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"token\"},\"Check your email and insert the code here\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"token\",onChange:this.onChange,value:this.defaultIfEmpty(this.state.token)})),this.state.errortoken?/*#__PURE__*/React.createElement(Alert,{color:\"danger\"},\" \",this.state.errortoken,\" \"):null,/*#__PURE__*/React.createElement(Button,{color:\"danger\"},\"Send\")):null,this.state.sentToken?/*#__PURE__*/React.createElement(Form,{onSubmit:this.sendpassword,encType:\"multipart/form-data\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,{for:\"password\"},\"Check your email and insert the code here\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",name:\"password\",onChange:this.onChange,value:this.defaultIfEmpty(this.state.password)}),/*#__PURE__*/React.createElement(Input,{type:\"hidden\",name:\"token\",onChange:this.onChange,value:this.defaultIfEmpty(this.state.token)})),this.state.errorpassword?/*#__PURE__*/React.createElement(Alert,{color:\"danger\"},\" \",this.state.errorpassword,\" \"):null,/*#__PURE__*/React.createElement(Button,{color:\"danger\"},\"Send\")):null,/*#__PURE__*/React.createElement(\"a\",{className:\"text-danger\",href:\"/\"},\" Home \"))));}}]);return ResetPassword;}(React.Component);export default ResetPassword;","map":{"version":3,"sources":["/home/sofi/Documentos/SpatialArdhi/src/components/ResetPassword.js"],"names":["React","Button","Form","FormGroup","Input","Label","Alert","axios","API_URL_RESETP","API_URL_SENDT","ResetPassword","state","email","password","token","sent","sentToken","error","errortoken","errorpassword","onChange","e","setState","target","name","value","defaultIfEmpty","reset","preventDefault","post","then","res","status","catch","sendtoken","sendpassword","localStorage","getItem","props","history","push","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Button, Form, FormGroup, Input, Label, Alert } from \"reactstrap\";\nimport axios from \"axios\";\nimport { API_URL_RESETP, API_URL_SENDT } from \"../constants\";\nclass ResetPassword extends React.Component {\n\n  state = {\n    email: \"\",\n    password: \"\",\n    token: \"\",\n    sent: null,\n    sentToken: null,\n    error: null,\n    errortoken: null,\n    errorpassword: null\n  };\ncomponentDidMount(){\n  if (localStorage.getItem(\"refresh\")){\n    this.props.history.push(\"/home\");\n  }\n}\n  onChange = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  defaultIfEmpty = (value) => {\n    return value === \"\" ? \"\" : value;\n  };\n\n  reset= e => {\n    e.preventDefault();\n    axios.post(API_URL_RESETP, this.state ).then(res =>  {\n      // console.log(res.status);\n      if(res.status === 200) {\n        this.setState({ sent : \"Check your email\",\n        error: null\n      });\n      }\n      }).catch(error => this.setState({\n        error: \"There is no active user associated with this e-mail address or the password can not be changed\"\n      }));\n  };\n\n\n  sendtoken= e => {\n    e.preventDefault();\n    axios.post(API_URL_SENDT, this.state).then(res =>  {\n      // console.log(res.status);\n      if(res.status === 200) {\n        this.setState({ sent : \"Check your email\",\n        errortoken: null\n      });\n      }\n      }).catch(error => this.setState({\n        errortoken: \"Invalid token\",\n      }));\n  };\n\n\n  sendpassword= e => {\n    e.preventDefault();\n    axios.post(\"https://www.spatialardhi.com/estate/password_reset/confirm/\", this.state ).then(res =>  {\n      // console.log(res.status);\n      if(res.status === 200) {\n        this.setState({ sent : \"Succesfully changed your password\",\n        errorpassword: null\n      });\n      }\n      }).catch(error => this.setState({\n        errorpassword: \"Invalid password\",\n        sent: null\n      }));\n  };\n\n\n  render() {\n    return (\n      <div className=\"limiter\">\n        <div className=\"container-login100\">\n          <div className=\"wrap-login100\">\n            <Form onSubmit={this.reset} encType=\"multipart/form-data\">\n              <FormGroup>\n                <Label for=\"email\">Email:</Label>\n                <Input\n                  type=\"text\"\n                  name=\"email\"\n                  onChange={this.onChange}\n                  value={this.defaultIfEmpty(this.state.email)}\n                />\n              </FormGroup>\n              { this.state.error ? \n             <Alert  color=\"danger\"> {this.state.error} </Alert>  :\n             null\n            }\n              { !this.state.token ? <Button color=\"danger\">Send me a verification code</Button> : null }\n\t     </Form>\n\n       { this.state.sent ? \n              <Form onSubmit={this.sendtoken} encType=\"multipart/form-data\">\n              <FormGroup>\n                <Label for=\"token\">Check your email and insert the code here</Label>\n                <Input\n                  type=\"text\"\n                  name=\"token\"\n                  onChange={this.onChange}\n                  value={this.defaultIfEmpty(this.state.token)}\n                />\n              </FormGroup>\n               { this.state.errortoken ? \n             <Alert  color=\"danger\"> {this.state.errortoken} </Alert>  :\n             null\n            } \n              <Button color=\"danger\">Send</Button>\n       </Form>\n              : null\n  }\n\n{ this.state.sentToken ? \n              <Form onSubmit={this.sendpassword} encType=\"multipart/form-data\">\n              <FormGroup>\n                <Label for=\"password\">Check your email and insert the code here</Label>\n                <Input\n                  type=\"text\"\n                  name=\"password\"\n                  onChange={this.onChange}\n                  value={this.defaultIfEmpty(this.state.password)}\n                />\n                 <Input\n                  type=\"hidden\"\n                  name=\"token\"\n                  onChange={this.onChange}\n                  value={this.defaultIfEmpty(this.state.token)}\n                />\n              </FormGroup>\n               { this.state.errorpassword ? \n             <Alert  color=\"danger\"> {this.state.errorpassword} </Alert>  :\n             null\n            } \n              <Button color=\"danger\">Send</Button>\n       </Form>\n              : null\n  }\n\n         <a className=\"text-danger\" href=\"/\"> Home </a>\n\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n}\nexport default ResetPassword;\n"]},"metadata":{},"sourceType":"module"}