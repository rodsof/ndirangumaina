{"ast":null,"code":"import _regeneratorRuntime from\"/home/sofi/Documentos/SpatialArdhi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/sofi/Documentos/SpatialArdhi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/sofi/Documentos/SpatialArdhi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createContext,useState,useEffect,useContext}from'react';import AuthContext from'./auth/AuthContext';import clientAxios from'../config/axios';export var UsersContext=createContext();var UsersProvider=function UsersProvider(props){var authContext=useContext(AuthContext);var user=authContext.user,autenticated=authContext.autenticated;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],saveUsers=_useState2[1];var _useState3=useState({title:''}),_useState4=_slicedToArray(_useState3,2),searchU=_useState4[0],searchUsers=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),searchMade=_useState6[0],saveSearch=_useState6[1];var title=searchU.title;useEffect(function(){if(autenticated&&user){var getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return clientAxios.get('profiles/?format=json');case 2:response=_context.sent;saveUsers(response.data);// await clientAxios.get('profiles/?format=json').then(res => this.setState({ users: res.users }));\ncase 4:case\"end\":return _context.stop();}}},_callee);}));return function getUsers(){return _ref.apply(this,arguments);};}();getUsers();}if(searchMade){var getSearchUsers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(title!==\" \"&&title!==undefined)){_context2.next=5;break;}_context2.next=3;return clientAxios.get('profiles/?format=json',{params:{search:title}});case 3:response=_context2.sent;saveUsers(response.data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getSearchUsers(){return _ref2.apply(this,arguments);};}();getSearchUsers();}},[searchU,user]);return/*#__PURE__*/React.createElement(UsersContext.Provider,{value:{users:users,searchU:searchU,searchUsers:searchUsers,saveUsers:saveUsers,saveSearch:saveSearch}},props.children);};export default UsersProvider;","map":{"version":3,"sources":["/home/sofi/Documentos/SpatialArdhi/src/context/UsersContext.js"],"names":["React","createContext","useState","useEffect","useContext","AuthContext","clientAxios","UsersContext","UsersProvider","props","authContext","user","autenticated","users","saveUsers","title","searchU","searchUsers","searchMade","saveSearch","getUsers","get","response","data","getSearchUsers","undefined","params","search","children"],"mappings":"wcAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,CAA+BC,QAA/B,CAAyCC,SAAzC,CAAoDC,UAApD,KAAsE,OAAtE,CACA,MAAOC,CAAAA,WAAP,KAAwB,oBAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CAEA,MAAO,IAAMC,CAAAA,YAAY,CAAGN,aAAa,EAAlC,CAEP,GAAMO,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,CAE7B,GAAMC,CAAAA,WAAW,CAAGN,UAAU,CAACC,WAAD,CAA9B,CAF6B,GAGrBM,CAAAA,IAHqB,CAGED,WAHF,CAGrBC,IAHqB,CAGfC,YAHe,CAGEF,WAHF,CAGfE,YAHe,eAKFV,QAAQ,CAAC,EAAD,CALN,wCAKtBW,KALsB,eAKfC,SALe,8BAMEZ,QAAQ,CAAC,CACpCa,KAAK,CAAE,EAD6B,CAAD,CANV,yCAMtBC,OANsB,eAMbC,WANa,8BASIf,QAAQ,CAAC,KAAD,CATZ,yCAStBgB,UATsB,eASVC,UATU,kBAWrBJ,CAAAA,KAXqB,CAWXC,OAXW,CAWrBD,KAXqB,CAa7BZ,SAAS,CAAC,UAAM,CACZ,GAAIS,YAAY,EAAID,IAApB,CAA0B,CACtB,GAAMS,CAAAA,QAAQ,0FAAG,sKACUd,CAAAA,WAAW,CAACe,GAAZ,CAAgB,uBAAhB,CADV,QACPC,QADO,eAEbR,SAAS,CAACQ,QAAQ,CAACC,IAAV,CAAT,CACA;AAHa,sDAAH,kBAARH,CAAAA,QAAQ,0CAAd,CAKAA,QAAQ,GACX,CAED,GAAIF,UAAJ,CAAgB,CACZ,GAAMM,CAAAA,cAAc,2FAAG,0JACfT,KAAK,GAAK,GAAV,EAAiBA,KAAK,GAAKU,SADZ,kDAEQnB,CAAAA,WAAW,CAACe,GAAZ,CAAgB,uBAAhB,CAAyC,CAAEK,MAAM,CAAE,CAAEC,MAAM,CAAEZ,KAAV,CAAV,CAAzC,CAFR,QAETO,QAFS,gBAGfR,SAAS,CAACQ,QAAQ,CAACC,IAAV,CAAT,CAHe,wDAAH,kBAAdC,CAAAA,cAAc,2CAApB,CAOAA,cAAc,GACjB,CAEJ,CArBQ,CAqBN,CAACR,OAAD,CAAUL,IAAV,CArBM,CAAT,CAuBA,mBACI,oBAAC,YAAD,CAAc,QAAd,EACI,KAAK,CAAE,CACHE,KAAK,CAALA,KADG,CAEHG,OAAO,CAAPA,OAFG,CAGHC,WAAW,CAAXA,WAHG,CAIHH,SAAS,CAATA,SAJG,CAKHK,UAAU,CAAVA,UALG,CADX,EASKV,KAAK,CAACmB,QATX,CADJ,CAaH,CAjDD,CAmDA,cAAepB,CAAAA,aAAf","sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\nimport AuthContext from './auth/AuthContext';\nimport clientAxios from '../config/axios';\n\nexport const UsersContext = createContext();\n\nconst UsersProvider = (props) => {\n\n    const authContext = useContext(AuthContext);\n    const { user, autenticated } = authContext;\n\n    const [users, saveUsers] = useState([]);\n    const [searchU, searchUsers] = useState({\n        title: '',\n    });\n    const [searchMade, saveSearch] = useState(false);\n\n    const { title } = searchU;\n\n    useEffect(() => {\n        if (autenticated && user) {\n            const getUsers = async () => {\n                const response = await clientAxios.get('profiles/?format=json');\n                saveUsers(response.data)\n                // await clientAxios.get('profiles/?format=json').then(res => this.setState({ users: res.users }));\n            }\n            getUsers();\n        }\n\n        if (searchMade) {\n            const getSearchUsers = async () => {\n                if (title !== \" \" && title !== undefined) {\n                    const response = await clientAxios.get('profiles/?format=json', { params: { search: title } })\n                    saveUsers(response.data) \n                    }\n         \n                }\n            getSearchUsers();\n        }\n\n    }, [searchU, user]);\n\n    return (\n        <UsersContext.Provider\n            value={{\n                users,\n                searchU,\n                searchUsers,\n                saveUsers,\n                saveSearch,\n            }}\n        >\n            {props.children}\n        </UsersContext.Provider>\n    );\n}\n\nexport default UsersProvider;"]},"metadata":{},"sourceType":"module"}