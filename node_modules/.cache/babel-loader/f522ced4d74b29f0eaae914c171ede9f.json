{"ast":null,"code":"var _jsxFileName = \"/home/sofi/Documentos/SpatialArdhi/src/context/DataContext.js\";\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport AuthContext from './auth/AuthContext';\nimport clientAxios from '../config/axios';\nexport const DataContext = createContext();\n\nconst DataProvider = props => {\n  const authContext = useContext(AuthContext);\n  const {\n    user,\n    autenticated\n  } = authContext;\n  const [data, saveData] = useState([]);\n  const [search, searchData] = useState({\n    title: ''\n  });\n  const [searchMade, saveSearch] = useState(false);\n  const {\n    title\n  } = search;\n  useEffect(() => {\n    if (autenticated && user) {\n      const getData = async () => {\n        const response = await clientAxios.get('data/?format=json', {\n          params: {\n            id: user.id\n          }\n        });\n        saveData(response.data);\n      };\n\n      getData();\n    }\n\n    if (searchMade) {\n      const getSearchData = async () => {\n        if (title !== \" \" && title !== undefined) {\n          const response = await clientAxios.get('data/?format=json', {\n            params: {\n              search: title\n            }\n          });\n          saveSearch(response.data);\n        }\n      };\n\n      getSearchData();\n    }\n  }, [search, user]);\n\n  const deleteProperty = async id => {\n    await clientAxios.delete('data/' + id + '/?format=json').then(() => {\n      const response = clientAxios.get('data/?format=json', {\n        params: {\n          id: user.id\n        }\n      });\n      saveData(response.data);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(DataContext.Provider, {\n    value: {\n      data,\n      searchData,\n      saveData,\n      saveSearch,\n      deleteProperty\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, props.children);\n};\n\nexport default DataProvider;","map":{"version":3,"sources":["/home/sofi/Documentos/SpatialArdhi/src/context/DataContext.js"],"names":["React","createContext","useState","useEffect","useContext","AuthContext","clientAxios","DataContext","DataProvider","props","authContext","user","autenticated","data","saveData","search","searchData","title","searchMade","saveSearch","getData","response","get","params","id","getSearchData","undefined","deleteProperty","delete","then","children"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,QAA/B,EAAyCC,SAAzC,EAAoDC,UAApD,QAAsE,OAAtE;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,OAAOC,WAAP,MAAwB,iBAAxB;AAEA,OAAO,MAAMC,WAAW,GAAGN,aAAa,EAAjC;;AAEP,MAAMO,YAAY,GAAIC,KAAD,IAAW;AAE5B,QAAMC,WAAW,GAAGN,UAAU,CAACC,WAAD,CAA9B;AACA,QAAM;AAAEM,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAyBF,WAA/B;AAEA,QAAM,CAACG,IAAD,EAAOC,QAAP,IAAmBZ,QAAQ,CAAC,EAAD,CAAjC;AACA,QAAM,CAACa,MAAD,EAASC,UAAT,IAAuBd,QAAQ,CAAC;AAClCe,IAAAA,KAAK,EAAE;AAD2B,GAAD,CAArC;AAGA,QAAM,CAACC,UAAD,EAAaC,UAAb,IAA2BjB,QAAQ,CAAC,KAAD,CAAzC;AAEA,QAAM;AAAEe,IAAAA;AAAF,MAAYF,MAAlB;AAEAZ,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIS,YAAY,IAAID,IAApB,EAA0B;AACtB,YAAMS,OAAO,GAAG,YAAY;AACxB,cAAMC,QAAQ,GAAG,MAAMf,WAAW,CAACgB,GAAZ,CAAgB,mBAAhB,EAAqC;AAAEC,UAAAA,MAAM,EAAE;AAAEC,YAAAA,EAAE,EAAEb,IAAI,CAACa;AAAX;AAAV,SAArC,CAAvB;AACAV,QAAAA,QAAQ,CAACO,QAAQ,CAACR,IAAV,CAAR;AACH,OAHD;;AAIAO,MAAAA,OAAO;AACV;;AAED,QAAIF,UAAJ,EAAgB;AAEZ,YAAMO,aAAa,GAAG,YAAY;AAC9B,YAAIR,KAAK,KAAK,GAAV,IAAiBA,KAAK,KAAKS,SAA/B,EAA0C;AACtC,gBAAML,QAAQ,GAAG,MAAMf,WAAW,CAACgB,GAAZ,CAAgB,mBAAhB,EAAqC;AAAEC,YAAAA,MAAM,EAAE;AAAER,cAAAA,MAAM,EAAEE;AAAV;AAAV,WAArC,CAAvB;AACAE,UAAAA,UAAU,CAACE,QAAQ,CAACR,IAAV,CAAV;AACC;AAEJ,OANL;;AAOAY,MAAAA,aAAa;AAChB;AAEJ,GArBQ,EAqBN,CAACV,MAAD,EAASJ,IAAT,CArBM,CAAT;;AAuBD,QAAMgB,cAAc,GAAG,MAAOH,EAAP,IAAc;AAChC,UAAMlB,WAAW,CAACsB,MAAZ,CAAmB,UAAUJ,EAAV,GAAe,eAAlC,EAAmDK,IAAnD,CAAwD,MAAM;AAChE,YAAMR,QAAQ,GAAGf,WAAW,CAACgB,GAAZ,CAAgB,mBAAhB,EAAqC;AAAEC,QAAAA,MAAM,EAAE;AAAEC,UAAAA,EAAE,EAAEb,IAAI,CAACa;AAAX;AAAV,OAArC,CAAjB;AACAV,MAAAA,QAAQ,CAACO,QAAQ,CAACR,IAAV,CAAR;AACH,KAHK,CAAN;AAID,GALJ;;AAOC,sBACI,oBAAC,WAAD,CAAa,QAAb;AACI,IAAA,KAAK,EAAE;AACHA,MAAAA,IADG;AAEHG,MAAAA,UAFG;AAGHF,MAAAA,QAHG;AAIHK,MAAAA,UAJG;AAKHQ,MAAAA;AALG,KADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASKlB,KAAK,CAACqB,QATX,CADJ;AAaH,CAxDD;;AA0DA,eAAetB,YAAf","sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\nimport AuthContext from './auth/AuthContext';\nimport clientAxios from '../config/axios';\n\nexport const DataContext = createContext();\n\nconst DataProvider = (props) => {\n\n    const authContext = useContext(AuthContext);\n    const { user, autenticated } = authContext;\n\n    const [data, saveData] = useState([]);\n    const [search, searchData] = useState({\n        title: '',\n    });\n    const [searchMade, saveSearch] = useState(false);\n\n    const { title } = search;\n\n    useEffect(() => {\n        if (autenticated && user) {\n            const getData = async () => {\n                const response = await clientAxios.get('data/?format=json', { params: { id: user.id } });\n                saveData(response.data)\n            }\n            getData();\n        }\n\n        if (searchMade) {\n\n            const getSearchData = async () => {\n                if (title !== \" \" && title !== undefined) {\n                    const response = await clientAxios.get('data/?format=json', { params: { search: title } })\n                    saveSearch(response.data) \n                    }\n                 \n                }\n            getSearchData();\n        }\n\n    }, [search, user]);\n\n   const deleteProperty = async (id) => {\n        await clientAxios.delete('data/' + id + '/?format=json').then(() => {\n            const response = clientAxios.get('data/?format=json', { params: { id: user.id } });\n            saveData(response.data)\n        });\n      };\n\n    return (\n        <DataContext.Provider\n            value={{\n                data,\n                searchData,\n                saveData,\n                saveSearch,\n                deleteProperty\n            }}\n        >\n            {props.children}\n        </DataContext.Provider>\n    );\n}\n\nexport default DataProvider;"]},"metadata":{},"sourceType":"module"}