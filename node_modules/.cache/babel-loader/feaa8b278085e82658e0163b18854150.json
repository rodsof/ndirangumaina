{"ast":null,"code":"import jwt_decode from \"jwt-decode\";\nimport tokenRefresh from \"./tokenRefresh\";\n\nconst tokenAuth = async token => {\n  const {\n    exp\n  } = jwt_decode(token); // Refresh the token a minute early to avoid latency issues\n\n  const expirationTime = exp * 1000 - 60000;\n\n  if (Date.now() >= expirationTime) {\n    localStorage.removeItem('access');\n    token = tokenRefresh();\n\n    if (token) {\n      return;\n    } else {\n      localStorage.clear();\n      return false;\n    } // set LocalStorage here based on response;\n\n  }\n};\n\nexport default tokenAuth;","map":{"version":3,"sources":["/home/sofi/Documentos/SpatialArdhi/src/config/token.js"],"names":["jwt_decode","tokenRefresh","tokenAuth","token","exp","expirationTime","Date","now","localStorage","removeItem","clear"],"mappings":"AACA,OAAOA,UAAP,MAAuB,YAAvB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;;AACA,MAAMC,SAAS,GAAG,MAAMC,KAAN,IAAgB;AAE9B,QAAM;AAAEC,IAAAA;AAAF,MAAUJ,UAAU,CAACG,KAAD,CAA1B,CAF8B,CAG9B;;AACA,QAAME,cAAc,GAAID,GAAG,GAAG,IAAP,GAAe,KAAtC;;AACA,MAAIE,IAAI,CAACC,GAAL,MAAcF,cAAlB,EAAkC;AAChCG,IAAAA,YAAY,CAACC,UAAb,CAAwB,QAAxB;AACAN,IAAAA,KAAK,GAAGF,YAAY,EAApB;;AACF,QAAGE,KAAH,EAAS;AACR;AACA,KAFD,MAGK;AACDK,MAAAA,YAAY,CAACE,KAAb;AAEA,aAAO,KAAP;AACH,KAViC,CAWhC;;AACD;AAEJ,CAnBD;;AAyBA,eAAeR,SAAf","sourcesContent":["\nimport jwt_decode from \"jwt-decode\";\nimport tokenRefresh from \"./tokenRefresh\";\nconst tokenAuth = async(token) => {\n\n    const { exp } = jwt_decode(token)\n    // Refresh the token a minute early to avoid latency issues\n    const expirationTime = (exp * 1000) - 60000\n    if (Date.now() >= expirationTime) {\n      localStorage.removeItem('access')\n      token = tokenRefresh()\n    if(token){\n     return;\n    }\n    else {\n        localStorage.clear()\n        \n        return false;\n    }\n      // set LocalStorage here based on response;\n    } \n  \n}\n\n\n\n\n\nexport default tokenAuth;\n"]},"metadata":{},"sourceType":"module"}